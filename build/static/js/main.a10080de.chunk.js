(this.webpackJsonptodoapp=this.webpackJsonptodoapp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),o=n.n(s),i=n(8),a=n.n(i),r=(n(14),n(2)),l=n(6);n(4);var u=function(e){var t=Object(s.useState)(e.item.task),n=Object(r.a)(t,2),o=n[0],i=n[1],a=Object(s.useState)(!1),l=Object(r.a)(a,2),u=l[0],d=l[1];return Object(c.jsx)("div",{className:"list",children:u?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"listitem",children:Object(c.jsx)("textarea",{className:"editTask",onChange:function(e){i(e.target.value)},placeholder:"Edit Task",value:o})}),Object(c.jsx)("div",{className:"listactions",children:Object(c.jsx)("button",{className:"saveTask",onClick:function(){e.editHandler(o,e.idx),d(!1)},disabled:0===o.trim().length,children:"Save Task"})})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"listitem",children:e.item.task}),Object(c.jsxs)("div",{className:"listactions",children:[Object(c.jsx)("button",{className:"edit",onClick:function(){return d(!0)},children:"edit"}),Object(c.jsx)("button",{className:"delete",onClick:function(){return e.deleteHandler(e.idx)},children:"delete"})]})]})})};function d(e){var t=Object(s.useState)([]),n=Object(r.a)(t,2),o=n[0],i=n[1],a=Object(s.useState)(""),d=Object(r.a)(a,2),j=d[0],h=d[1],b=function(e){var t=o[e]._id;fetch("http://localhost:9999/todo/".concat(t),{method:"DELETE",credentials:"include"}).then((function(t){console.log("Got successfully DELETE"),o.splice(e,1),i(Object(l.a)(o))}))},f=function(e,t){var n=o[t]._id;fetch("http://localhost:9999/todo/".concat(n),{method:"PUT",body:JSON.stringify({task:e}),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){console.log("Got successfully response from PUT",e),o[t]=e,i(Object(l.a)(o))}))};return Object(s.useEffect)((function(){fetch("http://localhost:9999/todo",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){var t=e.sort((function(e,t){return new Date(e.creationTime).valueOf()-new Date(t.creationTime).valueOf()}));i(t)}))}),[]),Object(c.jsxs)("div",{id:"main",children:[Object(c.jsxs)("div",{className:"user",children:[Object(c.jsxs)("div",{style:{backgroundColor:"darkgray",padding:"10px",border:"1px solid black"},children:["Username: ",Object(c.jsx)("b",{children:e.username})]}),Object(c.jsx)("button",{onClick:e.logoutHandler,children:"Log Out"})]}),Object(c.jsxs)("div",{className:"new",children:[Object(c.jsx)("textarea",{id:"task",onChange:function(e){h(e.target.value)},placeholder:"New Item",value:j}),Object(c.jsx)("button",{id:"btn",onClick:function(){fetch("http://localhost:9999/todo",{method:"POST",body:JSON.stringify({task:j}),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){console.log("Got data from POST backend",e),o.push(e),i(Object(l.a)(o)),h("")}))},disabled:0===j.trim().length,children:"Add Item"})]}),o.map((function(e,t){return Object(c.jsx)(u,{item:e,idx:t,editHandler:f,deleteHandler:b},e._id)}))]})}function j(e){var t=Object(s.useState)(""),n=Object(r.a)(t,2),o=n[0],i=n[1],a=Object(s.useState)(""),l=Object(r.a)(a,2),u=l[0],d=l[1];return Object(c.jsxs)("div",{className:"login",children:[Object(c.jsx)("input",{type:"text",placeholder:"Enter username",value:o,onChange:function(e){return i(e.target.value)}}),Object(c.jsx)("input",{type:"password",placeholder:"Enter password",value:u,onChange:function(e){return d(e.target.value)}}),e.error?Object(c.jsx)("div",{className:"error",children:e.error}):null,Object(c.jsx)("button",{onClick:function(){return e.signupHandler(o,u)},children:"Sign Up"}),Object(c.jsx)("button",{onClick:function(){return e.loginHandler(o,u)},children:"Log In"})]})}var h=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(s.useState)(void 0),a=Object(r.a)(i,2),l=a[0],u=a[1],h=Object(s.useState)(void 0),b=Object(r.a)(h,2),f=b[0],O=b[1],p=function(){return fetch("http://localhost:9999/userinfo",{credentials:"include"}).then((function(e){return e.ok?e.json():(o(!1),O(void 0),{success:!1})})).then((function(e){!1!==e.success&&(o(!0),O(e.userName))}))};Object(s.useEffect)((function(){p()}),[]);var m=function(e,t,n){fetch(e,{method:"POST",body:JSON.stringify({userName:t,password:n}),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.ok?{success:!0}:e.json()})).then((function(e){if(!0===e.success)return p();u(e.err)}))};return n?Object(c.jsx)(d,{username:f,logoutHandler:function(){return fetch("http://localhost:9999/logout",{credentials:"include"}).then((function(e){e.ok&&(o(!1),O(void 0))}))}}):Object(c.jsx)(j,{signupHandler:function(e,t){m("http://localhost:9999/signup",e,t)},loginHandler:function(e,t){m("http://localhost:9999/login",e,t)},error:l})},b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),o(e),i(e)}))};a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(h,{})}),document.getElementById("root")),b()},4:function(e,t,n){}},[[15,1,2]]]);
//# sourceMappingURL=main.a10080de.chunk.js.map